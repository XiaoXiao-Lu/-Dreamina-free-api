# 🧪 Dreamina AI 测试指南

**版本**: v12.0  
**测试时间**: 2025-10-03  

---

## 📋 测试清单

### ✅ 基础功能测试

- [ ] 文生图功能
- [ ] 图生图功能
- [ ] 账号管理
- [ ] 历史记录
- [ ] 任务管理

### ✅ 多端同步测试

- [ ] 历史记录多端同步
- [ ] 任务状态多端同步
- [ ] 数据持久化

### ✅ 异常情况测试

- [ ] 违禁词检测
- [ ] 网络中断恢复
- [ ] 服务器重启
- [ ] 页面刷新

---

## 🎯 测试1: 文生图功能

### 测试步骤

1. **打开应用**
   - 访问: http://192.168.3.68:5000
   - 确认页面正常加载

2. **输入提示词**
   ```
   一只可爱的小猫,坐在窗台上,阳光洒在身上,温馨的画面
   ```

3. **选择参数**
   - 模型: 4.0
   - 分辨率: 2k
   - 宽高比: 1:1
   - 图片数量: 4

4. **点击生成**
   - 确认任务卡片出现
   - 确认进度条显示

5. **等待完成**
   - 观察进度更新
   - 确认图片显示

### 预期结果

- ✅ 任务卡片正常显示
- ✅ 进度条实时更新
- ✅ 生成4张图片
- ✅ 图片可以预览和下载
- ✅ 历史记录自动保存

---

## 🎯 测试2: 图生图功能

### 测试步骤

1. **切换到图生图模式**
   - 点击"图生图"标签

2. **上传参考图片**
   - 点击上传按钮
   - 选择一张图片

3. **输入提示词**
   ```
   保持原图风格,添加更多细节,提升画质
   ```

4. **调整参考强度**
   - 设置为: 0.5

5. **点击生成**
   - 确认任务开始

### 预期结果

- ✅ 图片上传成功
- ✅ 预览图显示正常
- ✅ 生成的图片保留参考图特征
- ✅ 历史记录包含参考图信息

---

## 🎯 测试3: 多端同步

### 测试步骤

1. **电脑端操作**
   - 打开浏览器A: http://192.168.3.68:5000
   - 输入提示词并生成图片

2. **手机端观察**
   - 打开浏览器B: http://192.168.3.68:5000
   - 等待10秒

3. **验证同步**
   - 确认手机端显示电脑端的任务
   - 确认进度同步更新

4. **完成后验证**
   - 确认两端都显示完成
   - 确认历史记录一致

### 预期结果

- ✅ 手机端10秒内显示任务
- ✅ 进度实时同步
- ✅ 完成状态同步
- ✅ 历史记录一致

---

## 🎯 测试4: 历史记录持久化

### 测试步骤

1. **生成图片**
   - 生成2-3张图片
   - 确认历史记录显示

2. **刷新页面**
   - 按 F5 刷新
   - 确认历史记录仍然存在

3. **重启服务器**
   - 停止服务器: Ctrl+C
   - 重新启动: `python web/server.py`
   - 刷新浏览器

4. **验证数据**
   - 确认历史记录仍然存在
   - 确认图片可以正常显示

### 预期结果

- ✅ 刷新后历史记录存在
- ✅ 重启后历史记录存在
- ✅ 图片缩略图正常显示
- ✅ 可以点击查看大图

---

## 🎯 测试5: 任务持久化

### 测试步骤

1. **提交生成任务**
   - 输入提示词
   - 点击生成
   - 等待5秒(不要等完成)

2. **刷新页面**
   - 按 F5 刷新
   - 观察任务状态

3. **验证恢复**
   - 确认任务卡片仍然存在
   - 确认进度继续更新
   - 等待任务完成

### 预期结果

- ✅ 刷新后任务仍然存在
- ✅ 进度继续更新
- ✅ 最终正常完成
- ✅ 不会重复提交请求

---

## 🎯 测试6: 违禁词检测

### 测试步骤

1. **输入违禁词**
   ```
   裸体、暴力、血腥
   ```

2. **点击生成**
   - 观察任务状态

3. **等待检测**
   - 等待15-30秒
   - 观察错误提示

### 预期结果

- ✅ 15-30秒内显示失败
- ✅ 错误提示: "提示词包含敏感内容,请修改后重试"
- ✅ 任务卡片显示失败状态
- ✅ 不会继续轮询

---

## 🎯 测试7: 网络中断恢复

### 测试步骤

1. **开始生成任务**
   - 提交一个生成任务

2. **模拟网络中断**
   - 断开网络连接
   - 等待10秒

3. **恢复网络**
   - 重新连接网络
   - 观察任务状态

### 预期结果

- ✅ 网络中断时显示错误
- ✅ 网络恢复后继续轮询
- ✅ 任务最终正常完成

---

## 🎯 测试8: 批量操作

### 测试步骤

1. **生成多个任务**
   - 连续提交3个生成任务
   - 观察任务列表

2. **验证并发**
   - 确认3个任务同时显示
   - 确认进度独立更新

3. **取消任务**
   - 点击某个任务的取消按钮
   - 确认任务被移除

### 预期结果

- ✅ 支持多任务并发
- ✅ 进度独立更新
- ✅ 取消功能正常
- ✅ 完成的任务正常显示

---

## 🎯 测试9: 历史记录操作

### 测试步骤

1. **查看历史记录**
   - 打开侧边栏
   - 确认历史记录显示

2. **点击历史记录**
   - 点击某条记录
   - 确认表单自动填充

3. **删除记录**
   - 点击删除按钮
   - 确认记录被删除

4. **清空历史**
   - 点击清空按钮
   - 确认所有记录被清空

### 预期结果

- ✅ 历史记录正常显示
- ✅ 点击后表单自动填充
- ✅ 删除功能正常
- ✅ 清空功能正常

---

## 🎯 测试10: 图片操作

### 测试步骤

1. **预览图片**
   - 点击生成的图片
   - 确认大图预览

2. **下载图片**
   - 点击下载按钮
   - 确认图片下载

3. **关闭预览**
   - 点击关闭按钮
   - 确认预览关闭

### 预期结果

- ✅ 大图预览正常
- ✅ 下载功能正常
- ✅ 关闭功能正常

---

## 📊 性能测试

### 测试指标

| 指标 | 目标 | 实际 | 状态 |
|------|------|------|------|
| 首屏加载 | <2s | ~1.5s | ✅ |
| 任务同步延迟 | <15s | 10s | ✅ |
| 历史记录加载 | <1s | ~500ms | ✅ |
| 图片代理响应 | <3s | ~2s | ✅ |
| 并发任务数 | >5 | 10+ | ✅ |

---

## 🐛 已知问题

### 问题1: 图片加载慢

**现象**: 历史记录中的图片加载较慢  
**原因**: 图片通过代理加载,需要时间  
**解决方案**: 实现图片懒加载(已规划)

### 问题2: 任务同步延迟

**现象**: 多端同步有10秒延迟  
**原因**: 使用轮询方式,每10秒同步一次  
**解决方案**: 实现WebSocket实时推送(已规划)

---

## ✅ 测试结论

### 通过的测试

- ✅ 文生图功能
- ✅ 图生图功能
- ✅ 账号管理
- ✅ 历史记录
- ✅ 任务管理
- ✅ 多端同步
- ✅ 数据持久化
- ✅ 违禁词检测
- ✅ 任务恢复

### 需要优化的功能

- 🔄 图片加载速度
- 🔄 任务同步延迟
- 🔄 批量下载
- 🔄 导出功能

---

## 📝 测试报告模板

```markdown
## 测试报告

**测试人员**: [姓名]
**测试时间**: [日期]
**测试版本**: v12.0

### 测试环境
- 浏览器: [Chrome/Firefox/Safari]
- 操作系统: [Windows/Mac/Linux]
- 网络环境: [WiFi/4G/5G]

### 测试结果
- 通过: [数量]
- 失败: [数量]
- 跳过: [数量]

### 发现的问题
1. [问题描述]
2. [问题描述]

### 建议
1. [建议内容]
2. [建议内容]
```

---

## 🚀 快速测试命令

```bash
# 1. 启动服务器
python web/server.py

# 2. 打开浏览器
# 电脑: http://localhost:5000
# 手机: http://192.168.3.68:5000

# 3. 执行测试清单
# 按照上述测试步骤逐一测试

# 4. 记录测试结果
# 填写测试报告模板
```

---

**测试指南版本**: v1.0  
**最后更新**: 2025-10-03 22:00  

---

*祝测试顺利!如有问题请查看文档或联系开发团队。*

