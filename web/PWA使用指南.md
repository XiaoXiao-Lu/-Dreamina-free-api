# 📱 Dreamina AI PWA 使用指南

## 什么是PWA?

PWA (Progressive Web App) 是一种渐进式Web应用,可以像原生App一样安装到手机主屏幕,提供接近原生应用的体验。

### ✨ PWA的优势

- ✅ **无需App Store** - 直接从浏览器安装
- ✅ **即时更新** - 自动获取最新版本
- ✅ **离线使用** - 查看历史记录无需网络
- ✅ **全屏体验** - 无浏览器地址栏
- ✅ **快速启动** - 像原生App一样快
- ✅ **节省空间** - 比原生App更小

---

## 📱 iOS (iPhone/iPad) 安装步骤

### 方法1: Safari浏览器 (推荐)

1. **打开Safari浏览器**
   - 在Safari中访问: `http://你的服务器IP:5000`
   - 例如: `http://192.168.3.68:5000`

2. **点击分享按钮**
   - 点击底部中间的 <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234A90E2' width='16' height='16'%3E%3Cpath d='M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z'/%3E%3C/svg%3E" style="display:inline;vertical-align:middle;"> (分享图标)

3. **选择"添加到主屏幕"**
   - 在弹出菜单中向下滚动
   - 找到并点击 "添加到主屏幕"

4. **确认添加**
   - 可以修改App名称(默认: Dreamina AI)
   - 点击右上角 "添加"

5. **完成!**
   - 返回主屏幕,找到 Dreamina AI 图标
   - 点击图标即可像原生App一样使用

### 📸 iOS安装截图说明

```
┌─────────────────────┐
│   Safari浏览器       │
│                     │
│  [网页内容]          │
│                     │
│  ┌─────────────┐   │
│  │  分享按钮    │   │ ← 点击这里
│  └─────────────┘   │
└─────────────────────┘
         ↓
┌─────────────────────┐
│   分享菜单           │
│                     │
│  📋 拷贝            │
│  📧 邮件            │
│  💬 信息            │
│  ...               │
│  ➕ 添加到主屏幕    │ ← 选择这个
│                     │
└─────────────────────┘
         ↓
┌─────────────────────┐
│  添加到主屏幕        │
│                     │
│  [图标预览]          │
│  Dreamina AI        │ ← 可修改名称
│                     │
│  [取消]    [添加]   │ ← 点击添加
└─────────────────────┘
```

---

## 🤖 Android 安装步骤

### 方法1: Chrome浏览器 (推荐)

1. **打开Chrome浏览器**
   - 访问: `http://你的服务器IP:5000`

2. **点击菜单**
   - 点击右上角 ⋮ (三个点)

3. **选择"添加到主屏幕"**
   - 或 "安装应用"

4. **确认安装**
   - 点击 "安装" 或 "添加"

5. **完成!**
   - 在主屏幕或应用抽屉中找到图标

### 方法2: 自动提示安装

- Chrome会自动检测PWA
- 底部会弹出 "添加到主屏幕" 提示
- 直接点击 "安装" 即可

---

## 🎯 PWA功能特性

### 1. **离线功能**
- ✅ 查看历史记录(已缓存的图片)
- ✅ 浏览界面
- ❌ 生成新图片(需要网络)

### 2. **自动更新**
- 应用会自动检测新版本
- 发现更新时会提示刷新
- 无需重新安装

### 3. **全屏模式**
- 无浏览器地址栏
- 更大的显示区域
- 沉浸式体验

### 4. **快速启动**
- 缓存静态资源
- 启动速度接近原生App

### 5. **推送通知** (未来功能)
- 图片生成完成通知
- 系统更新通知

---

## 🔧 常见问题

### Q1: 为什么找不到"添加到主屏幕"?

**iOS**:
- 必须使用Safari浏览器
- Chrome/Firefox等不支持iOS PWA安装

**Android**:
- 使用Chrome浏览器
- 确保Chrome版本 ≥ 40

### Q2: 安装后图标不显示?

- 清除浏览器缓存后重试
- 检查网络连接
- 重新访问网站并安装

### Q3: 离线模式下能做什么?

**可以**:
- ✅ 查看历史记录
- ✅ 浏览已缓存的图片
- ✅ 查看界面

**不可以**:
- ❌ 生成新图片
- ❌ 下载图片
- ❌ 同步最新数据

### Q4: 如何卸载PWA?

**iOS**:
1. 长按主屏幕图标
2. 点击 "删除App"
3. 确认删除

**Android**:
1. 长按主屏幕图标
2. 拖到 "卸载" 或点击 "应用信息"
3. 点击 "卸载"

### Q5: PWA会占用多少空间?

- 初始安装: ~5MB
- 缓存图片后: 根据历史记录数量
- 可以在浏览器设置中清除缓存

### Q6: 如何更新PWA?

- 自动更新: 打开App时自动检测
- 手动更新: 刷新页面
- 强制更新: 清除缓存后重新打开

---

## 📊 PWA vs 原生App

| 特性 | PWA | 原生App |
|------|-----|---------|
| 安装方式 | 浏览器直接安装 | App Store下载 |
| 更新方式 | 自动更新 | 手动更新 |
| 开发成本 | 低 | 高 |
| 审核流程 | 无需审核 | 需要审核 |
| 离线功能 | 部分支持 | 完全支持 |
| 推送通知 | 支持 | 支持 |
| 系统集成 | 有限 | 完全 |
| 文件大小 | 小 | 大 |

---

## 🎨 PWA技术栈

本应用使用的PWA技术:

- **Manifest.json** - App配置文件
- **Service Worker** - 离线缓存和后台同步
- **Cache API** - 资源缓存
- **Fetch API** - 网络请求拦截
- **Web App Manifest** - 安装配置

---

## 🚀 开发者信息

### 缓存策略

1. **静态资源** (HTML/CSS/JS)
   - 策略: 缓存优先,后台更新
   - 缓存时间: 永久(版本控制)

2. **API请求**
   - 策略: 网络优先,缓存降级
   - 缓存时间: 运行时缓存

3. **图片资源**
   - 策略: 缓存优先
   - 缓存时间: 永久(HTTP缓存)

### Service Worker生命周期

```
安装 → 等待 → 激活 → 运行
  ↓      ↓      ↓      ↓
缓存   跳过   清理   拦截
资源   等待   旧缓存  请求
```

---

## 📞 技术支持

如有问题,请检查:
1. 浏览器控制台日志
2. Service Worker状态
3. 网络连接状态
4. 缓存存储情况

---

## 🎉 享受PWA体验!

现在你可以像使用原生App一样使用Dreamina AI了!

**特点**:
- 📱 主屏幕图标
- 🚀 快速启动
- 📶 离线查看
- 🔄 自动更新
- 🎨 全屏体验

