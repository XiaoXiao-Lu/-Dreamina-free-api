# Dreamina AI Web ç‰ˆ - é¡¹ç›®æ€»è§ˆ

## ğŸ¯ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯å°† ComfyUI Dreamina æ’ä»¶è½¬æ¢ä¸ºç§»åŠ¨ç«¯å‹å¥½çš„ Web åº”ç”¨çš„å®Œæ•´å®ç°ã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒæ–‡ç”Ÿå›¾å’Œå›¾ç”Ÿå›¾åŠŸèƒ½ï¼Œå®Œç¾é€‚é…æ‰‹æœºæµè§ˆå™¨ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
web/
â”œâ”€â”€ index.html              # ä¸»é¡µé¢ï¼ˆå®Œæ•´ç‰ˆï¼‰
â”œâ”€â”€ standalone.html         # ç‹¬ç«‹ç‰ˆï¼ˆæ— éœ€åç«¯ï¼‰
â”œâ”€â”€ server.py              # Flask åç«¯æœåŠ¡å™¨
â”œâ”€â”€ requirements.txt       # Python ä¾èµ–
â”œâ”€â”€ start.bat             # Windows å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start.sh              # Linux/Mac å¯åŠ¨è„šæœ¬
â”œâ”€â”€ README.md             # ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ DEPLOY.md             # éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ PROJECT_OVERVIEW.md   # é¡¹ç›®æ€»è§ˆï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css         # å“åº”å¼æ ·å¼è¡¨
â”‚
â””â”€â”€ js/
    â”œâ”€â”€ config.js         # é…ç½®ç®¡ç†
    â”œâ”€â”€ api.js            # API è°ƒç”¨å’Œæœ¬åœ°å­˜å‚¨
    â”œâ”€â”€ ui.js             # UI äº¤äº’é€»è¾‘
    â””â”€â”€ app.js            # ä¸»åº”ç”¨é€»è¾‘
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ

- **HTML5**: è¯­ä¹‰åŒ–æ ‡ç­¾ï¼Œç§»åŠ¨ç«¯ä¼˜åŒ–
- **CSS3**: 
  - CSS Variables (ä¸»é¢˜ç³»ç»Ÿ)
  - Flexbox & Grid (å“åº”å¼å¸ƒå±€)
  - Animations (æµç•…åŠ¨ç”»)
  - Media Queries (ç§»åŠ¨ç«¯é€‚é…)
- **JavaScript (åŸç”Ÿ)**:
  - ES6+ è¯­æ³•
  - Async/Await (å¼‚æ­¥å¤„ç†)
  - LocalStorage (æœ¬åœ°å­˜å‚¨)
  - Fetch API (ç½‘ç»œè¯·æ±‚)

### åç«¯æŠ€æœ¯æ ˆ

- **Python 3.7+**
- **Flask**: è½»é‡çº§ Web æ¡†æ¶
- **Flask-CORS**: è·¨åŸŸæ”¯æŒ
- **åŸæœ‰æ ¸å¿ƒæ¨¡å—**:
  - TokenManager: Token å’Œè´¦å·ç®¡ç†
  - ApiClient: Dreamina API è°ƒç”¨

---

## ğŸ¨ è®¾è®¡ç‰¹ç‚¹

### 1. å“åº”å¼è®¾è®¡

- **ç§»åŠ¨ç«¯ä¼˜å…ˆ**: ä»å°å±å¹•å¼€å§‹è®¾è®¡
- **æ–­ç‚¹è®¾ç½®**:
  - æ‰‹æœº: < 480px
  - å¹³æ¿: 480px - 768px
  - æ¡Œé¢: > 768px
- **è§¦æ‘¸ä¼˜åŒ–**: å¤§æŒ‰é’®ã€æ˜“ç‚¹å‡»åŒºåŸŸ

### 2. æš—è‰²ä¸»é¢˜

- æŠ¤çœ¼çš„æ·±è‰²é…è‰²
- é«˜å¯¹æ¯”åº¦æ–‡å­—
- æŸ”å’Œçš„é˜´å½±æ•ˆæœ
- æ¸å˜è‰²ç‚¹ç¼€

### 3. ç”¨æˆ·ä½“éªŒ

- **å³æ—¶åé¦ˆ**: Toast æç¤ºã€åŠ è½½åŠ¨ç”»
- **è¿›åº¦æ˜¾ç¤º**: å®æ—¶ç”Ÿæˆè¿›åº¦
- **å†å²è®°å½•**: ä¿å­˜ç”Ÿæˆå†å²
- **å›¾ç‰‡é¢„è§ˆ**: å…¨å±é¢„è§ˆå’Œä¸‹è½½

---

## ğŸ”„ æ•°æ®æµç¨‹

### æ–‡ç”Ÿå›¾æµç¨‹

```
ç”¨æˆ·è¾“å…¥
  â†“
å‰ç«¯éªŒè¯
  â†“
å‘é€ POST /api/generate/t2i
  â†“
åç«¯æ¥æ”¶å‚æ•°
  â†“
è°ƒç”¨ ApiClient.generate_t2i()
  â†“
TokenManager ç”Ÿæˆç­¾å
  â†“
è¯·æ±‚ Dreamina API
  â†“
è½®è¯¢æŸ¥è¯¢çŠ¶æ€
  â†“
ä¸‹è½½ç”Ÿæˆçš„å›¾ç‰‡
  â†“
è¿”å›å›¾ç‰‡ URLs
  â†“
å‰ç«¯æ˜¾ç¤ºç»“æœ
```

### å›¾ç”Ÿå›¾æµç¨‹

```
ç”¨æˆ·ä¸Šä¼ å‚è€ƒå›¾
  â†“
å‰ç«¯è½¬æ¢ä¸º Blob
  â†“
å‘é€ POST /api/generate/i2i (FormData)
  â†“
åç«¯ä¿å­˜ä¸´æ—¶æ–‡ä»¶
  â†“
è°ƒç”¨ ApiClient.generate_i2i()
  â†“
ä¸Šä¼ å‚è€ƒå›¾åˆ° Dreamina
  â†“
å‘èµ·å›¾ç”Ÿå›¾è¯·æ±‚
  â†“
è½®è¯¢æŸ¥è¯¢çŠ¶æ€
  â†“
ä¸‹è½½ç”Ÿæˆçš„å›¾ç‰‡
  â†“
æ¸…ç†ä¸´æ—¶æ–‡ä»¶
  â†“
è¿”å›ç»“æœ
  â†“
å‰ç«¯æ˜¾ç¤º
```

---

## ğŸ’¾ æ•°æ®å­˜å‚¨

### LocalStorage ç»“æ„

```javascript
{
  // è´¦å·åˆ—è¡¨
  "dreamina_accounts": [
    {
      "id": "1234567890",
      "sessionId": "xxx",
      "description": "è´¦å·1",
      "createdAt": "2024-01-01T00:00:00Z"
    }
  ],
  
  // å½“å‰è´¦å·
  "dreamina_current_account": "1234567890",
  
  // å†å²è®°å½•
  "dreamina_history": [
    {
      "id": "1234567890",
      "prompt": "ä¸€åªå¯çˆ±çš„å°çŒ«",
      "model": "3.0",
      "resolution": "2k",
      "ratio": "1:1",
      "mode": "t2i",
      "images": ["url1", "url2"],
      "timestamp": "2024-01-01T00:00:00Z"
    }
  ],
  
  // ç”¨æˆ·è®¾ç½®
  "dreamina_settings": {
    "model": "3.0",
    "resolution": "2k",
    "ratio": "1:1"
  }
}
```

---

## ğŸ”Œ API æ¥å£

### 1. å¥åº·æ£€æŸ¥

```
GET /api/health
```

**å“åº”**:
```json
{
  "status": "ok",
  "message": "Dreamina AI Web Server is running"
}
```

### 2. è·å–è´¦å·åˆ—è¡¨

```
GET /api/accounts
```

**å“åº”**:
```json
{
  "success": true,
  "accounts": [
    {
      "id": "0",
      "description": "è´¦å·1",
      "sessionId": "xxx..."
    }
  ]
}
```

### 3. è·å–ç§¯åˆ†ä¿¡æ¯

```
GET /api/accounts/:id/credit
```

**å“åº”**:
```json
{
  "success": true,
  "credit": {
    "total_credit": 100,
    "gift_credit": 50,
    "purchase_credit": 50,
    "vip_credit": 0
  }
}
```

### 4. æ–‡ç”Ÿå›¾

```
POST /api/generate/t2i
Content-Type: application/json

{
  "prompt": "ä¸€åªå¯çˆ±çš„å°çŒ«",
  "model": "3.0",
  "resolution": "2k",
  "ratio": "1:1",
  "seed": -1
}
```

**å“åº”**:
```json
{
  "success": true,
  "taskId": "xxx",
  "message": "ä»»åŠ¡å·²æäº¤"
}
```

### 5. å›¾ç”Ÿå›¾

```
POST /api/generate/i2i
Content-Type: multipart/form-data

params: {"prompt": "...", "model": "3.0", ...}
image_0: [File]
image_1: [File]
```

**å“åº”**:
```json
{
  "success": true,
  "completed": true,
  "images": ["url1", "url2"],
  "historyId": "xxx"
}
```

### 6. æŸ¥è¯¢çŠ¶æ€

```
GET /api/generate/status/:taskId
```

**å“åº”**:
```json
{
  "success": true,
  "completed": true,
  "images": ["url1", "url2"]
}
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. è´¦å·ç®¡ç†

- âœ… æ·»åŠ å¤šä¸ªè´¦å·
- âœ… åˆ‡æ¢å½“å‰è´¦å·
- âœ… åˆ é™¤è´¦å·
- âœ… æŸ¥çœ‹ç§¯åˆ†ä¿¡æ¯

### 2. å›¾ç‰‡ç”Ÿæˆ

- âœ… æ–‡ç”Ÿå›¾ï¼ˆT2Iï¼‰
- âœ… å›¾ç”Ÿå›¾ï¼ˆI2Iï¼Œæœ€å¤š6å¼ å‚è€ƒå›¾ï¼‰
- âœ… å¤šæ¨¡å‹æ”¯æŒ
- âœ… å¤šåˆ†è¾¨ç‡ï¼ˆ1K/2K/4Kï¼‰
- âœ… å¤šæ¯”ä¾‹é€‰æ‹©
- âœ… è‡ªå®šä¹‰ç§å­

### 3. ç”¨æˆ·ç•Œé¢

- âœ… å“åº”å¼è®¾è®¡
- âœ… æš—è‰²ä¸»é¢˜
- âœ… ä¾§è¾¹æ èœå•
- âœ… æ¨¡æ€æ¡†
- âœ… Toast æç¤º
- âœ… åŠ è½½åŠ¨ç”»
- âœ… è¿›åº¦æ¡

### 4. æ•°æ®ç®¡ç†

- âœ… æœ¬åœ°å­˜å‚¨
- âœ… å†å²è®°å½•
- âœ… è®¾ç½®ä¿å­˜
- âœ… å›¾ç‰‡é¢„è§ˆ
- âœ… å›¾ç‰‡ä¸‹è½½

---

## ğŸš€ éƒ¨ç½²æ–¹å¼

### 1. æœ¬åœ°å¼€å‘

```bash
python server.py
```

è®¿é—®: http://localhost:5000

### 2. å±€åŸŸç½‘è®¿é—®

```bash
python server.py
```

è®¿é—®: http://[ä½ çš„IP]:5000

### 3. äº‘æœåŠ¡å™¨

ä½¿ç”¨ Gunicorn + Nginx:

```bash
gunicorn -w 4 -b 127.0.0.1:5000 server:app
```

### 4. Docker

```bash
docker-compose up -d
```

---

## ğŸ”’ å®‰å…¨è€ƒè™‘

### 1. SessionID ä¿æŠ¤

- âŒ ä¸åœ¨å‰ç«¯ç¡¬ç¼–ç 
- âœ… å­˜å‚¨åœ¨ LocalStorage
- âœ… ä»…åœ¨åç«¯ä½¿ç”¨
- âœ… å®šæœŸæ›´æ–°

### 2. HTTPS

- ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ HTTPS
- ä½¿ç”¨ Let's Encrypt å…è´¹è¯ä¹¦

### 3. CORS

- é…ç½®å…è®¸çš„æ¥æº
- é™åˆ¶è¯·æ±‚æ–¹æ³•

### 4. è¾“å…¥éªŒè¯

- å‰ç«¯éªŒè¯
- åç«¯äºŒæ¬¡éªŒè¯
- é˜²æ­¢ XSS å’Œæ³¨å…¥

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. å‰ç«¯ä¼˜åŒ–

- CSS/JS å‹ç¼©
- å›¾ç‰‡æ‡’åŠ è½½
- ä½¿ç”¨ CDN
- æµè§ˆå™¨ç¼“å­˜

### 2. åç«¯ä¼˜åŒ–

- Gunicorn å¤šè¿›ç¨‹
- è¿æ¥æ± 
- ç¼“å­˜æœºåˆ¶
- å¼‚æ­¥å¤„ç†

### 3. ç½‘ç»œä¼˜åŒ–

- Gzip å‹ç¼©
- HTTP/2
- å‡å°‘è¯·æ±‚æ•°
- èµ„æºåˆå¹¶

---

## ğŸ› å·²çŸ¥é—®é¢˜

### 1. è·¨åŸŸé™åˆ¶

ç‹¬ç«‹ç‰ˆæœ¬ï¼ˆstandalone.htmlï¼‰ç”±äºæµè§ˆå™¨çš„ CORS é™åˆ¶ï¼Œæ— æ³•ç›´æ¥è°ƒç”¨ Dreamina APIã€‚

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨å®Œæ•´ç‰ˆï¼ˆéœ€è¦åç«¯ï¼‰
- ä½¿ç”¨æµè§ˆå™¨ CORS æ‰©å±•ï¼ˆä»…å¼€å‘ï¼‰
- é…ç½®ä»£ç†æœåŠ¡å™¨

### 2. å¤§æ–‡ä»¶ä¸Šä¼ 

å›¾ç”Ÿå›¾ä¸Šä¼ å¤šå¼ é«˜æ¸…å›¾ç‰‡å¯èƒ½è¾ƒæ…¢ã€‚

**è§£å†³æ–¹æ¡ˆ**:
- å‰ç«¯å‹ç¼©å›¾ç‰‡
- å¢åŠ è¶…æ—¶æ—¶é—´
- æ˜¾ç¤ºä¸Šä¼ è¿›åº¦

### 3. ç§»åŠ¨ç«¯é”®ç›˜

åœ¨ç§»åŠ¨ç«¯ï¼Œè™šæ‹Ÿé”®ç›˜å¯èƒ½é®æŒ¡è¾“å…¥æ¡†ã€‚

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ `scrollIntoView()`
- è°ƒæ•´ viewport
- ç›‘å¬é”®ç›˜äº‹ä»¶

---

## ğŸ”® æœªæ¥è®¡åˆ’

### çŸ­æœŸè®¡åˆ’

- [ ] æ·»åŠ æ›´å¤šæ¨¡å‹æ”¯æŒ
- [ ] æ‰¹é‡ä¸‹è½½åŠŸèƒ½
- [ ] å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½
- [ ] åˆ†äº«åŠŸèƒ½

### ä¸­æœŸè®¡åˆ’

- [ ] PWA æ”¯æŒï¼ˆç¦»çº¿ä½¿ç”¨ï¼‰
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ä¸»é¢˜åˆ‡æ¢ï¼ˆäº®è‰²/æš—è‰²ï¼‰
- [ ] é«˜çº§å‚æ•°è°ƒæ•´

### é•¿æœŸè®¡åˆ’

- [ ] ç”¨æˆ·ç³»ç»Ÿ
- [ ] äº‘ç«¯åŒæ­¥
- [ ] ç¤¾åŒºåŠŸèƒ½
- [ ] AI åŠ©æ‰‹

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [Flask æ–‡æ¡£](https://flask.palletsprojects.com/)
- [MDN Web Docs](https://developer.mozilla.org/)
- [Dreamina å®˜ç½‘](https://dreamina.capcut.com)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤:

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºåŸ ComfyUI æ’ä»¶å¼€å‘ï¼Œéµå¾ªç›¸åŒçš„è®¸å¯è¯ã€‚

---

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issueã€‚

---

**æ„Ÿè°¢ä½¿ç”¨ Dreamina AI Web ç‰ˆï¼** ğŸ¨âœ¨

