# å‘ä¸‹æ»‘åŠ¨å…³é—­åŸå›¾åŠŸèƒ½

## ğŸ“± åŠŸèƒ½è¯´æ˜

åœ¨æ‰‹æœºç«¯æŸ¥çœ‹åŸå›¾æ—¶,ç°åœ¨å¯ä»¥é€šè¿‡**å‘ä¸‹æ»‘åŠ¨**æ¥å…³é—­åŸå›¾æŸ¥çœ‹å™¨,å°±åƒå¾®ä¿¡ã€Instagram ç­‰åº”ç”¨ä¸€æ ·ã€‚

## âœ¨ ç‰¹æ€§

### 1. æµç•…çš„è§†è§‰åé¦ˆ
- å›¾ç‰‡è·Ÿéšæ‰‹æŒ‡å‘ä¸‹ç§»åŠ¨
- èƒŒæ™¯é€æ˜åº¦å®æ—¶å˜åŒ– (1.0 â†’ 0.3)
- å›¾ç‰‡ç¼©æ”¾å®æ—¶å˜åŒ– (1.0 â†’ 0.8)
- æœ€å¤§æ»‘åŠ¨è·ç¦»: 300px

### 2. æ™ºèƒ½åˆ¤æ–­
- æ»‘åŠ¨è·ç¦» > 100px: è‡ªåŠ¨å…³é—­æŸ¥çœ‹å™¨
- æ»‘åŠ¨è·ç¦» < 100px: 0.3ç§’åŠ¨ç”»å¼¹å›åŸä½

### 3. æ‰‹åŠ¿ä¼˜å…ˆçº§
- ç¼©æ”¾çŠ¶æ€ä¸‹ (scale > 1): ç¦ç”¨æ»‘åŠ¨å…³é—­,é¿å…è¯¯è§¦
- æ­£å¸¸çŠ¶æ€ä¸‹ (scale = 1): å¯ç”¨æ»‘åŠ¨å…³é—­

### 4. æ–¹å‘è¯†åˆ«
- å‚ç›´æ»‘åŠ¨ (|deltaY| > |deltaX|): å…³é—­åŠŸèƒ½
- æ°´å¹³æ»‘åŠ¨ (|deltaX| > |deltaY|): åˆ‡æ¢å›¾ç‰‡ (å¤šå¼ æ—¶)

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

1. ç‚¹å‡»å†å²è®°å½•ä¸­çš„å›¾ç‰‡,æ‰“å¼€åŸå›¾æŸ¥çœ‹å™¨
2. åœ¨å›¾ç‰‡ä¸Šå‘ä¸‹æ»‘åŠ¨
3. æ»‘åŠ¨è¶…è¿‡ 100px åæ¾æ‰‹,æŸ¥çœ‹å™¨è‡ªåŠ¨å…³é—­
4. å¦‚æœæ»‘åŠ¨è·ç¦»ä¸å¤Ÿ,å›¾ç‰‡ä¼šå¼¹å›åŸä½

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¿®æ”¹çš„æ–‡ä»¶
- `web/js/ui.js` - æ·»åŠ æ»‘åŠ¨å…³é—­é€»è¾‘
- `web/css/style.css` - æ·»åŠ è¿‡æ¸¡åŠ¨ç”»æ”¯æŒ

### æ ¸å¿ƒä»£ç 

#### 1. æ»‘åŠ¨æ£€æµ‹ (ui.js)
```javascript
// åˆ¤æ–­æ»‘åŠ¨æ–¹å‘
if (Math.abs(deltaX) > Math.abs(deltaY)) {
    // æ°´å¹³æ»‘åŠ¨ - åˆ‡æ¢å›¾ç‰‡
    if (this.currentImageList.length > 1 && Math.abs(deltaX) > 50) {
        // åˆ‡æ¢é€»è¾‘...
    }
} else {
    // å‚ç›´æ»‘åŠ¨ - å…³é—­æŸ¥çœ‹å™¨
    if (deltaY > 100) {
        this.hideFullscreenViewer();
    }
}
```

#### 2. å®æ—¶è§†è§‰åé¦ˆ (ui.js)
```javascript
// æ»‘åŠ¨ä¸­çš„è§†è§‰æ•ˆæœ
if (isVerticalSwipe && deltaY > 0) {
    const progress = Math.min(deltaY / 300, 1);
    const opacity = 1 - progress * 0.7;
    const scale = 1 - progress * 0.2;

    this.fullscreenViewer.style.backgroundColor = `rgba(0, 0, 0, ${opacity})`;
    this.fullscreenImage.style.transform = `translateY(${deltaY}px) scale(${scale})`;
    this.fullscreenImage.style.transition = 'none';
}
```

#### 3. æ¢å¤åŠ¨ç”» (ui.js)
```javascript
// æ»‘åŠ¨è·ç¦»ä¸å¤Ÿæ—¶,å¹³æ»‘æ¢å¤
if (deltaY < 100) {
    this.fullscreenViewer.style.backgroundColor = '';
    this.fullscreenImage.style.transition = 'transform 0.3s ease';
    this.fullscreenImage.style.transform = '';
    setTimeout(() => {
        this.fullscreenImage.style.transition = '';
    }, 300);
}
```

#### 4. æ ·å¼é‡ç½® (ui.js)
```javascript
hideFullscreenViewer() {
    // ... å…¶ä»–ä»£ç  ...
    
    // é‡ç½®æ»‘åŠ¨ç›¸å…³æ ·å¼
    this.fullscreenViewer.style.backgroundColor = '';
    this.fullscreenImage.style.transition = '';
    this.fullscreenImage.style.transform = '';
}
```

#### 5. CSS è¿‡æ¸¡æ”¯æŒ (style.css)
```css
.fullscreen-viewer {
    /* ... å…¶ä»–æ ·å¼ ... */
    /* æ”¯æŒæ»‘åŠ¨å…³é—­æ—¶çš„èƒŒæ™¯è‰²è¿‡æ¸¡ */
    transition: background-color 0.3s ease;
}
```

## ğŸ§ª æµ‹è¯•

### æµ‹è¯•é¡µé¢
æ‰“å¼€ `web/gesture-test.html` å¯ä»¥æµ‹è¯•æ»‘åŠ¨å…³é—­åŠŸèƒ½:
```
http://localhost:5000/gesture-test.html
```

### æµ‹è¯•åœºæ™¯
1. âœ… æ­£å¸¸å‘ä¸‹æ»‘åŠ¨ > 100px - åº”è¯¥å…³é—­
2. âœ… å‘ä¸‹æ»‘åŠ¨ < 100px - åº”è¯¥å¼¹å›
3. âœ… ç¼©æ”¾åæ»‘åŠ¨ - åº”è¯¥ç¦ç”¨å…³é—­
4. âœ… æ°´å¹³æ»‘åŠ¨ - åº”è¯¥åˆ‡æ¢å›¾ç‰‡
5. âœ… å¿«é€Ÿæ»‘åŠ¨ - åº”è¯¥å“åº”æµç•…
6. âœ… æ…¢é€Ÿæ»‘åŠ¨ - åº”è¯¥å®æ—¶åé¦ˆ

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. ä½¿ç”¨ transform è€Œé top/left
```javascript
// âœ… å¥½ - ä½¿ç”¨ GPU åŠ é€Ÿ
image.style.transform = `translateY(${deltaY}px)`;

// âŒ å·® - è§¦å‘é‡æ’
image.style.top = `${deltaY}px`;
```

### 2. ç¦ç”¨è¿‡æ¸¡åŠ¨ç”»åœ¨æ»‘åŠ¨ä¸­
```javascript
// æ»‘åŠ¨ä¸­ç¦ç”¨è¿‡æ¸¡,é¿å…å¡é¡¿
image.style.transition = 'none';

// æ¾æ‰‹åæ¢å¤è¿‡æ¸¡
image.style.transition = 'transform 0.3s ease';
```

### 3. ä½¿ç”¨ passive äº‹ä»¶ç›‘å¬
```javascript
viewer.addEventListener('touchmove', handler, { passive: true });
```

## ğŸ› å·²çŸ¥é—®é¢˜

### å·²ä¿®å¤
- âœ… ç¼©æ”¾çŠ¶æ€ä¸‹è¯¯è§¦å‘å…³é—­ - å·²æ·»åŠ  scale æ£€æŸ¥
- âœ… æ°´å¹³æ»‘åŠ¨è¯¯åˆ¤ä¸ºå‚ç›´ - å·²ä¼˜åŒ–æ–¹å‘åˆ¤æ–­
- âœ… å…³é—­åæ ·å¼æ®‹ç•™ - å·²æ·»åŠ æ ·å¼é‡ç½®

### å¾…ä¼˜åŒ–
- â³ å‘ä¸Šæ»‘åŠ¨çš„å¤„ç† (ç›®å‰å¿½ç•¥)
- â³ æ»‘åŠ¨é€Ÿåº¦æ£€æµ‹ (å¿«é€Ÿæ»‘åŠ¨é™ä½é˜ˆå€¼)

## ğŸŒ å…¼å®¹æ€§

### å·²æµ‹è¯•
- âœ… iOS Safari 14+
- âœ… Android Chrome 90+
- âœ… å¾®ä¿¡å†…ç½®æµè§ˆå™¨
- âœ… å„ç§ç§»åŠ¨ç«¯æµè§ˆå™¨

### é™çº§æ–¹æ¡ˆ
- æ¡Œé¢æµè§ˆå™¨: ä¿ç•™åŸæœ‰å…³é—­æ–¹å¼ (ç‚¹å‡» âœ•ã€ESCã€èƒŒæ™¯)
- ä¸æ”¯æŒè§¦æ‘¸çš„è®¾å¤‡: è‡ªåŠ¨ç¦ç”¨æ»‘åŠ¨åŠŸèƒ½

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.1 - 2025-01-XX
- âœ¨ æ–°å¢: å‘ä¸‹æ»‘åŠ¨å…³é—­åŸå›¾åŠŸèƒ½
- âœ¨ æ–°å¢: æ»‘åŠ¨æ—¶å®æ—¶è§†è§‰åé¦ˆ
- ğŸ¨ ä¼˜åŒ–: æ»‘åŠ¨æ‰‹åŠ¿æ£€æµ‹é€»è¾‘
- ğŸ¨ ä¼˜åŒ–: æ‰‹åŠ¿ä¼˜å…ˆçº§å¤„ç†
- ğŸ› ä¿®å¤: ç¼©æ”¾çŠ¶æ€ä¸‹è¯¯è§¦å‘æ»‘åŠ¨
- ğŸ“ æ–‡æ¡£: æ·»åŠ æ‰‹åŠ¿æ“ä½œè¯´æ˜
- ğŸ§ª æµ‹è¯•: æ·»åŠ æ‰‹åŠ¿æµ‹è¯•é¡µé¢

## ğŸ“ å‚è€ƒ

### ç±»ä¼¼å®ç°
- å¾®ä¿¡å›¾ç‰‡æŸ¥çœ‹å™¨
- Instagram å›¾ç‰‡æŸ¥çœ‹
- Twitter å›¾ç‰‡æŸ¥çœ‹
- iOS ç…§ç‰‡åº”ç”¨

### è®¾è®¡åŸåˆ™
1. **è‡ªç„¶**: ç¬¦åˆç”¨æˆ·ç›´è§‰
2. **æµç•…**: 60fps åŠ¨ç”»
3. **å¯æ§**: å¯ä»¥å–æ¶ˆæ“ä½œ
4. **åé¦ˆ**: å®æ—¶è§†è§‰åé¦ˆ
5. **å®¹é”™**: é¿å…è¯¯è§¦

## ğŸ’¡ æœªæ¥æ”¹è¿›

1. **æ»‘åŠ¨é€Ÿåº¦æ£€æµ‹**
   - å¿«é€Ÿæ»‘åŠ¨é™ä½å…³é—­é˜ˆå€¼
   - æ…¢é€Ÿæ»‘åŠ¨æé«˜å…³é—­é˜ˆå€¼

2. **å¼¹æ€§æ•ˆæœ**
   - å‘ä¸Šæ»‘åŠ¨æ—¶æ·»åŠ å¼¹æ€§
   - è¶…è¿‡æœ€å¤§è·ç¦»æ—¶æ·»åŠ é˜»å°¼

3. **haptic åé¦ˆ**
   - è¾¾åˆ°å…³é—­é˜ˆå€¼æ—¶éœ‡åŠ¨
   - iOS è®¾å¤‡æ”¯æŒ Taptic Engine

4. **è‡ªå®šä¹‰é…ç½®**
   - å…è®¸ç”¨æˆ·è°ƒæ•´å…³é—­é˜ˆå€¼
   - å…è®¸ç¦ç”¨æ»‘åŠ¨å…³é—­

## ğŸ¤ è´¡çŒ®

å¦‚æœæ‚¨æœ‰ä»»ä½•å»ºè®®æˆ–å‘ç°é—®é¢˜,æ¬¢è¿:
1. æäº¤ Issue
2. æäº¤ Pull Request
3. åœ¨æµ‹è¯•é¡µé¢åé¦ˆä½“éªŒ

