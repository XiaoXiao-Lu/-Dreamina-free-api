# Dreamina AI 服务器启动说明

## 📦 快速启动

### 方式1: 普通启动 (推荐新手)

**双击运行**: `启动服务器.bat`

**特点**:
- ✅ 显示启动窗口
- ✅ 可以看到启动日志
- ✅ 询问是否打开浏览器
- ✅ 启动后可关闭窗口,服务器继续运行

**关闭**: 双击 `关闭服务器.bat`

---

### 方式2: 静默启动 (推荐老手)

**双击运行**: `启动服务器(静默).vbs`

**特点**:
- ✅ 完全后台运行
- ✅ 无窗口显示
- ✅ 弹窗提示启动成功
- ✅ 询问是否打开浏览器

**关闭**: 双击 `关闭服务器.bat`

---

## 🎯 使用步骤

### 启动服务器

1. **双击启动脚本**
   - 新手: `启动服务器.bat`
   - 老手: `启动服务器(静默).vbs`

2. **等待启动**
   - 普通启动: 看到"服务器已在后台启动"
   - 静默启动: 弹窗显示"服务器已在后台启动"

3. **访问网页**
   - 本地访问: http://localhost:5000
   - 手机访问: http://192.168.3.68:5000

---

### 关闭服务器

1. **双击关闭脚本**
   - `关闭服务器.bat`

2. **等待关闭**
   - 看到"服务器已成功关闭"

---

## 📱 手机访问

### 步骤:

1. **确保手机和电脑在同一WiFi**

2. **查看电脑IP地址**
   - 启动脚本会显示局域网地址
   - 或者运行: `ipconfig` 查看IPv4地址

3. **在手机浏览器访问**
   - 格式: `http://[电脑IP]:5000`
   - 示例: `http://192.168.3.68:5000`

4. **安装PWA (可选)**
   - iOS: Safari → 分享 → 添加到主屏幕
   - Android: Chrome → 菜单 → 安装应用

---

## ⚠️ 常见问题

### 1. 启动失败

**问题**: 提示"未检测到Python"

**解决**:
- 安装Python 3.8+
- 下载地址: https://www.python.org/downloads/
- 安装时勾选"Add Python to PATH"

---

### 2. 端口被占用

**问题**: 提示"端口5000已被占用"

**解决**:
```bash
# 方法1: 关闭占用端口的程序
netstat -ano | findstr :5000
taskkill /PID [进程ID] /F

# 方法2: 修改端口
# 编辑 web/server.py
# 将 port=5000 改为 port=5001
```

---

### 3. 无法访问

**问题**: 浏览器无法打开页面

**解决**:
1. 检查服务器是否启动
   - 查看是否有`.server_pid.txt`文件
   - 任务管理器查看`pythonw.exe`进程

2. 检查防火墙
   - 允许Python通过防火墙
   - 允许端口5000

3. 检查IP地址
   - 运行`ipconfig`查看正确的IP
   - 确保手机和电脑在同一网络

---

### 4. 关闭失败

**问题**: 双击关闭脚本无效

**解决**:
```bash
# 手动终止所有Python进程
taskkill /F /IM python.exe
taskkill /F /IM pythonw.exe

# 或者打开任务管理器手动结束进程
```

---

## 🔧 高级配置

### 修改端口

编辑 `web/server.py`:
```python
if __name__ == '__main__':
    app.run(
        host='0.0.0.0',
        port=5000,  # 修改这里
        debug=True
    )
```

---

### 开机自启动

1. **创建快捷方式**
   - 右键 `启动服务器(静默).vbs`
   - 发送到 → 桌面快捷方式

2. **添加到启动文件夹**
   - 按 `Win + R`
   - 输入: `shell:startup`
   - 将快捷方式复制到打开的文件夹

---

### 查看日志

如果需要查看详细日志:

1. **使用普通启动**
   - 双击 `启动服务器.bat`
   - 不要关闭窗口

2. **或者手动运行**
   ```bash
   python web/server.py
   ```

---

## 📊 文件说明

| 文件 | 说明 | 用途 |
|------|------|------|
| `启动服务器.bat` | 普通启动脚本 | 显示窗口,适合调试 |
| `启动服务器(静默).vbs` | 静默启动脚本 | 后台运行,无窗口 |
| `关闭服务器.bat` | 关闭脚本 | 停止服务器 |
| `.server_pid.txt` | 进程ID文件 | 自动生成,用于关闭 |
| `启动说明.md` | 本文件 | 使用说明 |

---

## 💡 使用建议

### 日常使用
- ✅ 使用 `启动服务器(静默).vbs` 快速启动
- ✅ 用完后记得关闭服务器
- ✅ 手机安装PWA,像原生App一样使用

### 开发调试
- ✅ 使用 `启动服务器.bat` 查看日志
- ✅ 或直接运行 `python web/server.py`
- ✅ 修改代码后会自动重启

---

## 🎉 享受使用!

如有问题,请查看:
- 项目文档
- GitHub Issues
- 联系开发者

---

**版本**: v31.0  
**更新时间**: 2025-10-04

